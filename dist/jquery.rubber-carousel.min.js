/*! rubberCarousel v0.1 | http://github.com/codefucker/rubberCarousel
 *  Â© Anatoly Lunev | toliklunev.ru | toliklunev@gmail.com
 *  Licensed under the MIT License */
!function(i){i.fn.rubberCarousel=function(e){function n(){var e,n=i(this),a=n.children("div"),s=a.wrapAll("<div></div>").parent(),r=s.wrap("<div></div>").parent(),o=r.wrap("<div></div>").parent(),l=n.children(".prev"),d=n.children(".next"),c=l.add(d);e=t.min_item_width?Math.min(Math.floor(s.width()/t.min_item_width),t.visible):t.visible;var p=0,b=100,u=a.size(),v=t.start,f=u-e,h="rubber-carousel",g=h+"__";if(n.addClass(h),o.addClass(g+"wrapper"),r.addClass(g+"wrap"),s.addClass(g+"list"),a.addClass(g+"item"),t.pagination)var w,m,_=Math.ceil(u/t.scroll),y=Math.ceil(t.start/t.scroll),C=0;if(e>1&&(b=Math.floor(100/e),r.css("margin-right",-1*(100%b)+"%")),s.contents().filter(function(){return 3==this.nodeType}).remove(),a.css({width:b+"%"}),e>=u&&t.abort_on_error)return n.addClass("is-init"),c.hide(),!1;if(t.buttons&&(l=i("<button></button>").addClass(g+"prev").text("prev"),d=i("<button></button>").addClass(g+"next").text("next"),c=l.add(d),n.append(c)),t.buttons_style&&(c.css({position:"absolute",top:"50%"}),l.css({left:-1*l.outerWidth()}),d.css({right:-1*d.outerWidth()})),t.pagination){w=i("<div></div>").addClass(g+"pagination");var k=i("<ul></ul>").appendTo(w);i.map(Array(_),function(e,a){{var s=i('<a href="#'+(a+1)+'">'+(a+1)+"</a>");i("<li></li>").append(s).appendTo(k)}s.click(function(){return n.trigger("spin",(a*t.scroll-C)%u),!1})}),m=k.children(),n.append(w)}if(t.pagination_style&&(k.css({"text-align":"center"}),m.css({display:"inline-block"})),c.bind("disable",function(){i(this).addClass("is-disabled").attr("disabled",!0)}),c.bind("enable",function(){i(this).removeClass("is-disabled").attr("disabled",!1)}),t.keybind){var x=function(e){var t=n.offset().top+n.height()/2-i(window).scrollTop();if(t>0&&t<i(window).height())switch(e.keyCode){case 37:l.addClass("active"),n.trigger("spin","prev");break;case 39:d.addClass("active"),n.trigger("spin","next")}},M=function(i){switch(i.keyCode){case 37:l.removeClass("active");break;case 39:d.removeClass("active")}};i(window).keydown(x),i(window).keyup(M)}switch(t.wrap){case"normal":var T=function(i){return i=Math.min(Math.max(0,i),f),v=i,t.disable_buttons&&(l.trigger(0==v?"disable":"enable"),d.trigger(v==u-e?"disable":"enable")),p=-1*i*b,!0};break;case"both":var T=function(i){return 0>i&&(i=f),i>f&&(i=0),p=-1*i*b,v=i,!0};break;case"circular":t.animation="js";var T=function(i){var e=-1*f*b;if(p=-1*i*b,v=i,0>i||i>f){if(0>i){var n=a.slice(-1*t.scroll);n.prependTo(s),s.css({left:-1*p+"%"}),p=0,v=0,t.pagination&&(t.pagination_cyclic?k.append(m.filter(":first-child")):C--)}else{var r=b*t.scroll,n=a.slice(0,t.scroll);n.appendTo(s),s.css({left:e+r+"%"}),p=e,v=f,t.pagination&&(t.pagination_cyclic?k.prepend(m.filter(":last-child")):C++)}a=s.children("div")}return!0}}n.bind("spin",function(i,e,n){return s.is(":animated")?!1:("string"==typeof e&&("prev"==e&&(e=v-t.scroll),"next"==e&&(e=v+t.scroll)),T(e)&&t.before(v,a.eq(v)),t.pagination&&(y=Math.ceil(v/t.scroll),m.eq((y+C)%u).addClass("active").siblings().removeClass("active")),void("js"==t.animation?s[n?"css":"animate"]({left:p+"%"},{duration:t.duration,easing:t.easing}):s.css({left:p+"%"})))}),n.bind("destroy",function(){a.prependTo(n).width(""),a.removeClass(g+"item"),o.remove(),n.unbind("prev",j),n.unbind("next",q),n.unbind("spin"),n.unbind("destroy"),t.buttons?c.remove():(c.show(),c.unbind("enable"),c.unbind("disable"),l.unbind("click",j),d.unbind("click",q),t.buttons_style&&(c.css({position:"",top:""}),l.css({left:""}),d.css({right:""}))),t.pagination&&w.remove(),t.keybind&&(i(window).unbind("keydown",x),i(window).unbind("keyup",M)),"css"==t.animation&&n.removeClass("is-css-animation")}),"css"==t.animation&&n.addClass("is-css-animation");var j=function(){n.trigger("spin","prev")},q=function(){n.trigger("spin","next")};n.trigger("spin",[t.start,!0]),n.bind("prev",j),n.bind("next",q),l.click(j),d.click(q),n.addClass("is-init")}var t={visible:1,scroll:1,start:0,duration:500,easing:"swing",wrap:"normal",animation:"css",keybind:!1,buttons:!1,pagination:!1,buttons_style:!1,pagination_style:!1,pagination_cyclic:!0,abort_on_error:!0,min_item_width:!1,disable_buttons:!0,counter:!1,auto:!1,before:function(){}};return t=i.extend(t,e),this.each(n)},i(function(){css&&i("head").append(i("<style>").text(css))})}(jQuery);var css=".rubber-carousel{display:none}.rubber-carousel__wrapper{overflow:hidden}.rubber-carousel__wrap{white-space:nowrap}.rubber-carousel__item{display:inline-block;vertical-align:top;white-space:normal}.rubber-carousel__list{position:relative}.rubber-carousel.is-css-animation .rubber-carousel__list{-webkit-transition:.5s left ease;-moz-transition:.5s left ease;-o-transition:.5s left ease;transition:.5s left ease}.rubber-carousel.is-init{display:block}";